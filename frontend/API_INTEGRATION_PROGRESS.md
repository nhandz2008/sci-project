### SCI Frontend × Backend API Integration Progress

Last updated: autogenerated from repo scan

Environment/base URL: `NEXT_PUBLIC_API_URL` (defaults to `http://localhost:8000`). Requests go through `app/api/utils.ts` which adds JSON headers, Authorization when `requireAuth` is set, and unified error handling.

Token storage: `localStorage['auth_token']` managed by `app/contexts/AuthContext.tsx`.

Summary
- **Total endpoints**: 32
- **Integrated**: 28
- **Partial (client exists, not wired in UI)**: 3
- **Not integrated**: 1

### System
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/health` | Not integrated | – | – |
| GET | `/api/v1/health` | Integrated | `app/account/page.tsx` (backend connectivity check) | Called as `.../api/v1/health/` (trailing slash) |

### Authentication
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| POST | `/auth/signup` | Integrated | `app/api/auth.ts` → `signUp`; `app/contexts/AuthContext.tsx` → `signup`; `app/signup/page.tsx` | Sets user in context (no token on signup, per API) |
| POST | `/auth/login` | Integrated | `app/api/auth.ts` → `login`; `app/contexts/AuthContext.tsx` → `login`; `app/login/page.tsx` | Stores `access_token` and user |
| POST | `/auth/forgot-password` | Partial | `app/api/auth.ts` → `forgotPassword` | UI (`app/reset-password/page.tsx`) currently simulates email step; not calling backend |
| POST | `/auth/reset-password` | Partial | `app/api/auth.ts` → `resetPassword` | UI (`app/reset-password/page.tsx`) simulates token + reset; not calling backend yet |
| GET | `/auth/me` | Integrated | `app/api/auth.ts` → `getCurrentUser`; `app/contexts/AuthContext.tsx` (startup auth check) | – |

### Users
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/users/me` | Partial | `app/api/users.ts` → `getCurrentUser` | Not used in UI; `auth/me` is used for quick current-user |
| PUT | `/users/me` | Integrated | `app/api/users.ts` → `updateCurrentUser`; `components/user-profile-form.tsx`; `app/account/page.tsx` | Profile edit modal updates name, organization, phone number |
| PUT | `/users/me/password` | Integrated | `app/api/users.ts` → `changePassword`; `app/reset-password/page.tsx` (logged-in step) | – |
| GET | `/users` | Integrated | `app/api/users.ts` → `getUsers`; `app/admin/users/page.tsx` | Supports filters and pagination |
| DELETE | `/users/{user_id}` | Integrated | `app/api/users.ts` → `deleteUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/deactivate` | Integrated | `app/api/users.ts` → `deactivateUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/activate` | Integrated | `app/api/users.ts` → `activateUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/role?new_role=...` | Integrated | `app/api/users.ts` → `changeUserRole`; `app/admin/users/page.tsx` | – |

### Competitions (public/creator)
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/competitions` | Integrated | `app/api/competitions.ts` → `getCompetitions`; `app/hooks/useCompetitions.ts`; `app/competitions/page.tsx`; `app/admin/competitions/page.tsx` | Public endpoint returns only approved items by spec; admin page applies client-side filters |
| GET | `/competitions/featured` | Integrated | `app/api/competitions.ts` → `getFeaturedCompetitions`; `app/admin/featured/page.tsx` | – |
| GET | `/competitions/{id}` | Integrated | `app/api/competitions.ts` → `getCompetition`; `app/hooks/useCompetition.ts`; `app/competitions/[id]/page.tsx`; `components/competition-details.tsx` | – |
| POST | `/competitions` | Integrated | `app/api/competitions.ts` → `createCompetition`; `app/account/page.tsx` (+ `components/create-competition-form.tsx`) | Creates with `is_approved=false` per API |
| PUT | `/competitions/{id}` | Integrated | `app/api/competitions.ts` → `updateCompetition`; `app/account/page.tsx` (+ `components/edit-competition-form.tsx`) | Full edit UI implemented |
| DELETE | `/competitions/{id}` | Integrated | `app/api/competitions.ts` → `deleteCompetition`; used in `app/account/page.tsx`, `app/admin/*` pages | – |
| GET | `/competitions/my/competitions` | Integrated | `app/api/competitions.ts` → `getMyCompetitions`; `app/account/page.tsx` | – |

### Admin — Competitions Moderation
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/admin/competitions/pending` | Integrated | `app/api/competitions.ts` → `getPendingCompetitions`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/approve` | Integrated | `app/api/competitions.ts` → `approveCompetition`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/reject` | Integrated | `app/api/competitions.ts` → `rejectCompetition`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/feature` | Integrated | `app/api/competitions.ts` → `featureCompetition`; `app/admin/competitions/page.tsx` | – |
| PUT | `/admin/competitions/{id}/unfeature` | Integrated | `app/api/competitions.ts` → `unfeatureCompetition`; `app/admin/featured/page.tsx`, `app/admin/competitions/page.tsx` | – |
| PUT | `/admin/competitions/{id}/activate` | Integrated | `app/api/competitions.ts` → `activateCompetition`; `app/admin/*` pages | – |
| PUT | `/admin/competitions/{id}/deactivate` | Integrated | `app/api/competitions.ts` → `deactivateCompetition`; `app/admin/*` pages | – |

### Uploads
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| POST | `/upload/images` | ✅ **INTEGRATED** | `app/api/upload.ts` → `uploadImage`; `components/image-upload.tsx`; `components/detail-images-upload.tsx` | Full image upload functionality with validation and error handling |
| DELETE | `/upload/images/{key:path}` | ✅ **INTEGRATED** | `app/api/upload.ts` → `deleteImage` | Available for future use in image management |
| GET | `/upload/images/status` | ✅ **INTEGRATED** | `app/api/upload.ts` → `getUploadStatus` | Available for checking upload service health |

### Notable notes and gaps
- **Password reset flow**: UI currently simulates email/token steps. Wire to `POST /auth/forgot-password` and `POST /auth/reset-password` for full integration.
- **Profile**: ✅ **COMPLETED** - Profile editing uses `PUT /users/me` via `components/user-profile-form.tsx` and updates context in `app/account/page.tsx`. Retrieval uses `GET /auth/me` on startup; `GET /users/me` client exists but is not used in UI.
- **System health**: Only `/api/v1/health` is used (as a connectivity probe in `app/account/page.tsx`). `/health` is unused.
- **Field coverage (overview)**: ✅ **COMPLETED** - Added `overview` field to all interfaces, forms, and display components. Overview field is now fully integrated with 2000 character limit and proper validation.
- **Admin user management**: ✅ **ENHANCED** - Added user detail viewing modal and improved user management interface. Note: Full user editing by admins requires backend endpoint that doesn't currently exist.
- **Image uploads**: ✅ **COMPLETED** - Full image upload functionality implemented with `app/api/upload.ts`, `components/image-upload.tsx`, `components/detail-images-upload.tsx`, and `hooks/useImageUpload.ts`. Supports competition background and detail images with validation and error handling.

### Cross-cutting implementation details
- All API calls go through `apiRequest` in `app/api/utils.ts` for consistent headers, error parsing (supports both `{detail}` and `{error:{...}}`), and 401 handling (redirect to `/login`).
- Auth-required calls set `requireAuth: true` and attach `Authorization: Bearer <token>`.

### Next steps
- Wire password reset endpoints into `app/reset-password/page.tsx`.
- ✅ **COMPLETED** - Profile editing functionality implemented with `PUT /users/me` endpoint (UI retrieves user via `GET /auth/me`).
- ✅ **COMPLETED** - Competition edit UI implemented with full `PUT /competitions/{id}` integration.
- ✅ **COMPLETED** - Overview field fully integrated across all components.
- ✅ **COMPLETED** - Image upload functionality fully implemented with comprehensive validation and error handling.
- **Backend enhancement needed**: Add admin endpoint for updating other users' information (e.g., `PUT /admin/users/{user_id}`).
