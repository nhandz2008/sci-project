### SCI Frontend × Backend API Integration Progress

Last updated: autogenerated from repo scan

Environment/base URL: `NEXT_PUBLIC_API_URL` (defaults to `http://localhost:8000`). Requests go through `app/api/utils.ts` which adds JSON headers, Authorization when `requireAuth` is set, and unified error handling.

Token storage: `localStorage['auth_token']` managed by `app/contexts/AuthContext.tsx`.

Summary
- **Total endpoints**: 29
- **Integrated**: 23
- **Partial (client exists, not wired in UI)**: 5
- **Not integrated**: 1

### System
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/health` | Not integrated | – | – |
| GET | `/api/v1/health` | Integrated | `app/account/page.tsx` (backend connectivity check) | Called as `.../api/v1/health/` (trailing slash) |

### Authentication
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| POST | `/auth/signup` | Integrated | `app/api/auth.ts` → `signUp`; `app/contexts/AuthContext.tsx` → `signup`; `app/signup/page.tsx` | Sets user in context (no token on signup, per API) |
| POST | `/auth/login` | Integrated | `app/api/auth.ts` → `login`; `app/contexts/AuthContext.tsx` → `login`; `app/login/page.tsx` | Stores `access_token` and user |
| POST | `/auth/forgot-password` | Partial | `app/api/auth.ts` → `forgotPassword` | UI (`app/reset-password/page.tsx`) currently simulates email step; not calling backend |
| POST | `/auth/reset-password` | Partial | `app/api/auth.ts` → `resetPassword` | UI (`app/reset-password/page.tsx`) simulates token + reset; not calling backend yet |
| GET | `/auth/me` | Integrated | `app/api/auth.ts` → `getCurrentUser`; `app/contexts/AuthContext.tsx` (startup auth check) | – |

### Users
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/users/me` | Partial | `app/api/users.ts` → `getCurrentUser` | Not used in UI; `auth/me` is used for quick current-user |
| PUT | `/users/me` | Partial | `app/api/users.ts` → `updateCurrentUser` | Not wired to UI (profile edit UI not present) |
| PUT | `/users/me/password` | Integrated | `app/api/users.ts` → `changePassword`; `app/reset-password/page.tsx` (logged-in step) | – |
| GET | `/users` | Integrated | `app/api/users.ts` → `getUsers`; `app/admin/users/page.tsx` | Supports filters and pagination |
| DELETE | `/users/{user_id}` | Integrated | `app/api/users.ts` → `deleteUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/deactivate` | Integrated | `app/api/users.ts` → `deactivateUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/activate` | Integrated | `app/api/users.ts` → `activateUser`; `app/admin/users/page.tsx` | – |
| PUT | `/users/{user_id}/role?new_role=...` | Integrated | `app/api/users.ts` → `changeUserRole`; `app/admin/users/page.tsx` | – |

### Competitions (public/creator)
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/competitions` | Integrated | `app/api/competitions.ts` → `getCompetitions`; `app/hooks/useCompetitions.ts`; `app/competitions/page.tsx`; `app/admin/competitions/page.tsx` | Public endpoint returns only approved items by spec; admin page applies client-side filters |
| GET | `/competitions/featured` | Integrated | `app/api/competitions.ts` → `getFeaturedCompetitions`; `app/admin/featured/page.tsx` | – |
| GET | `/competitions/{id}` | Integrated | `app/api/competitions.ts` → `getCompetition`; `app/hooks/useCompetition.ts`; `app/competitions/[id]/page.tsx`; `components/competition-details.tsx` | – |
| POST | `/competitions` | Integrated | `app/api/competitions.ts` → `createCompetition`; `app/account/page.tsx` (+ `components/create-competition-form.tsx`) | Creates with `is_approved=false` per API |
| PUT | `/competitions/{id}` | Partial | `app/api/competitions.ts` → `updateCompetition` | UI not wired (edit in `app/account/page.tsx` is TODO) |
| DELETE | `/competitions/{id}` | Integrated | `app/api/competitions.ts` → `deleteCompetition`; used in `app/account/page.tsx`, `app/admin/*` pages | – |
| GET | `/competitions/my/competitions` | Integrated | `app/api/competitions.ts` → `getMyCompetitions`; `app/account/page.tsx` | – |

### Admin — Competitions Moderation
| Method | Endpoint | Status | Where used | Notes |
|---|---|---|---|---|
| GET | `/admin/competitions/pending` | Integrated | `app/api/competitions.ts` → `getPendingCompetitions`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/approve` | Integrated | `app/api/competitions.ts` → `approveCompetition`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/reject` | Integrated | `app/api/competitions.ts` → `rejectCompetition`; `app/admin/pending/page.tsx` | – |
| PUT | `/admin/competitions/{id}/feature` | Integrated | `app/api/competitions.ts` → `featureCompetition`; `app/admin/competitions/page.tsx` | – |
| PUT | `/admin/competitions/{id}/unfeature` | Integrated | `app/api/competitions.ts` → `unfeatureCompetition`; `app/admin/featured/page.tsx`, `app/admin/competitions/page.tsx` | – |
| PUT | `/admin/competitions/{id}/activate` | Integrated | `app/api/competitions.ts` → `activateCompetition`; `app/admin/*` pages | – |
| PUT | `/admin/competitions/{id}/deactivate` | Integrated | `app/api/competitions.ts` → `deactivateCompetition`; `app/admin/*` pages | – |

### Notable notes and gaps
- **Password reset flow**: UI currently simulates email/token steps. Wire to `POST /auth/forgot-password` and `POST /auth/reset-password` for full integration.
- **Profile**: Endpoints `GET /users/me` and `PUT /users/me` exist in client but are not used in UI. Add a profile edit/view flow to consume them.
- **Competition update**: Client method exists; edit UI not implemented. Wire `PUT /competitions/{id}`.
- **System health**: Only `/api/v1/health` is used (as a connectivity probe in `app/account/page.tsx`). `/health` is unused.
- **Field coverage (overview)**: API spec includes optional `overview` (<= 2000 chars). Current types/forms do not surface `overview`. Consider adding to `Competition` types, create/update forms, and details UI.

### Cross-cutting implementation details
- All API calls go through `apiRequest` in `app/api/utils.ts` for consistent headers, error parsing (supports both `{detail}` and `{error:{...}}`), and 401 handling (redirect to `/login`).
- Auth-required calls set `requireAuth: true` and attach `Authorization: Bearer <token>`.

### Next steps
- Wire password reset endpoints into `app/reset-password/page.tsx`.
- Add profile page to use `GET/PUT /users/me`.
- Implement competition edit UI to use `PUT /competitions/{id}`.
- Optionally display and allow editing of `overview` field.


